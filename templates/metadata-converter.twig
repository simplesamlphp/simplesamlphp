{% set pagetitle = 'Metadata parser'|trans %}
{% extends "base.twig" %}

{%  set i=1 %}
{% block content %}
    <h1>{{ pagetitle }}</h1>
    <form method="post" class="pure-form" enctype="multipart/form-data">
        <h3> {% trans 'XML metadata' %}</h3>
        <div class="pure-control-group">
            <textarea name="xmldata" rows="20" class="xmlarea edge">{{ xmldata }}</textarea>
        </div>
        <br>
        <div class="center">
            <div class="pure-button-group overflow" role="group">
                <label class="pure-button"><i class="fa fa-folder-open"> </i> Select a file...
                    <input type="file" name="xmlfile" class="hidden" multiple>
                </label>
                <label id="show-file" class="pure-button show-files" disabled>No file selected.</label>
            </div>
            <br>
            <button class="pure-button pure-input-1-3">{{ 'Parse'|trans }}</button>
        </div>
    </form>

    {% if output -%}
    <br>
    <h2>{{ 'Converted metadata'|trans }}</h2>
        {% for type, text in output if text -%}
    <div class="metadatabox">
        <div class="metadata-type">
            <h3> {{ type }}</h3>
            <button data-clipboard-target="#metadata{{ loop.index }}" id="btn{{loop.index }}" class="pure-button right clipboard-btn" onclick="metadata({{ loop.index }})" >
                <i class="fa fa-copy"></i>
            </button>
        </div>
        <div class="metadata-code">
            <pre id="metadata{{ loop.index }}">
                {%- spaceless %}{{ text }}{% endspaceless %}
            </pre>
        </div>
    </div>
            <br><br>
            {%- set i=i+1 %}
        {%- endfor -%}
    {% endif -%}
{% endblock content -%}

